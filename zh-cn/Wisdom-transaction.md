# 五、 事务结构
## 5.1 事务类型

| 编号 | 交易类型|说明
| :----:|:----:|:----:
| 1 | 0x00|coinbase事务
| 2 | 0x01|WDC转账
| 3 | 0x02|投票
| 4 | 0x03|存证事务(弃用)
| 5 | 0x07|规则部署(弃用)
| 6 | 0x08|规则调用(弃用)
| 7 | 0x09|申请孵化
| 8 | 0x0a|获取利益收益
| 9 | 0x0b|获取分享收益
| 10 | 0x0c|提取本金
| 11 | 0x0d|撤回投票
| 12 | 0x0e|抵押
| 13 | 0x0f|撤回抵押
| 14 | 0x10 | wasm 合约部署
| 15 | 0x11 | wasm 合约调用

##  5.2 事务结构

| 编号 | 字段名|作用|类型
| :----:|:----:|---|:----:|
| <div style="width:23pt;">1</div> | <div style="width:60pt">version</div>|事务版本|<div style="width:90pt">1字节</div>
| 2 | txHash |事务哈希|32字节SHA3-256
| 3 |type|事务类型|1字节
| 4 |nonce|防止重放攻击|无符号64位
| 5|from|签发者公钥|32字节
| 6|gasPrice|手续费单价，实际的手续费是单价乘以Gas值|无符号64位
| 7|amount|转账金额，根据不同的事务类型，转账金额可以分别表示普通转账、孵化本金、利息提取、分享收益提取等等|无符号64位
| 8|signature|签发者的签名|byte[]
| 9|to|接受者公钥哈希，如果是存证和规则部署，则全部填零；若是投票，填写目标的公钥哈希；若是规则调用，填写规则编程的公钥哈希|20字节Hash160
| 10|payloadLen|字节长度|4字节
| 11|payload|字节数组，这里可以存储存证数据，也可以是孵化脚本和存证数据；如果是合约，则是合约的RLP编码数据|byte[]


##  5.3 关于payload
&#160;&#160;&#160;&#160;&#160;&#160;不同的事务类型，payload中的存储数据各不相同，但存储类型相同，都是字节数组。除去coinbase事务、WDC转账、投票和抵押是没有payload,以下是其他类型事务的payload说明：

&#160;&#160;&#160;&#160;&#160;&#160;存证：存放存证数据，编码格式官方推荐用UTF-8，不然在官方浏览器上查看存证数据会乱码；

&#160;&#160;&#160;&#160;&#160;&#160;规则部署：存放规则部署数据，其payload分为两段，第一段表示规则类型，1个字节，第二段是规则部署数据，RLP编码格式；

&#160;&#160;&#160;&#160;&#160;&#160;规则调用：存放规则调用数据，其payload分为两段，第一段表示调用规则类型，1个字节，第二段是规则部署数据，RLP编码格式；

&#160;&#160;&#160;&#160;&#160;&#160;申请孵化：存放孵化数据，用Protobuf定义，使用格式如下，该事务已禁用；

&#160;&#160;&#160;&#160;&#160;&#160;{

&#160;&#160;&#160;&#160;&#160;&#160; &#160;&#160;&#160;&#160;&#160;&#160;   "txid": //申请孵化时为空，后续加入，为空时填0

&#160;&#160;&#160;&#160;&#160;&#160; &#160;&#160;&#160;&#160;&#160;&#160;    "sharepubkeyhash":十六进制哈希值

&#160;&#160;&#160;&#160;&#160;&#160; &#160;&#160;&#160;&#160;&#160;&#160;    "type"：120,//value给一个字节

&#160;&#160;&#160;&#160;&#160;&#160;}

&#160;&#160;&#160;&#160;&#160;&#160;获取利益收益/获取分享收益/提取本金：存放申请孵化事务哈希，32字节；

&#160;&#160;&#160;&#160;&#160;&#160;撤回投票：存放投票事务哈希，32字节；

&#160;&#160;&#160;&#160;&#160;&#160;撤回抵押：存放抵押事务哈希，32字节。

&#160;&#160;&#160;&#160;&#160;&#160;合约部署：

```python
    payload = rlp(gaslimit, bytecode, args, abi) 
    # payload 是 gasLimit (整数)、webassembly 字节码、构造器参数（可选）和abi 串联并经过rlp编码的结果
```

&#160;&#160;&#160;&#160;&#160;&#160;合约调用：

```python
    payload = rlp(gaslimit, method, args) 
    # payload 是 gasLimit (整数)、调用合约的方法名和调用合约的参数串联并且 rlp 编码的结果
```